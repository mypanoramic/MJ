<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Supa Quick
    </title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <style>
        .profa {
            display: grid;
            align-items: center;
            grid-template-columns: 1fr 21fr;
            column-gap: 5px;
            font-size: 14px;
        }

        .usera {
            display: grid;
            align-items: center;
            grid-template-columns: 21fr 0fr;
            column-gap: 5px;
            font-size: 14px;
        }

        .text {
            color: black;
        }

        .left {
            position: relative;
            background: rgb(252, 255, 250);
            text-align: left;
            min-width: 5%;
            max-width: 85%;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #ccc;
            float: left;
            left: 0px;
        }

        .left::before {
            content: '';
            position: absolute;
            visibility: visible;
            top: -1px;
            left: -10px;
            border: 10px solid transparent;
            border-top: 10px solid #ccc;
        }

        .left::after {
            content: '';
            position: absolute;
            visibility: visible;
            top: 0px;
            left: -8px;
            border: 10px solid transparent;
            border-top: 10px solid rgb(252, 255, 250)wheat;

            clear: both;
        }


        .right {
            position: relative;
            background: rgb(252, 255, 250);
            text-align: right;
            min-width: 5%;
            max-width: 85%;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #ccc;
            float: right;
            right: 10px;
            color: rgb(29, 28, 27);
        }

        .right::before {
            content: '';
            position: absolute;
            visibility: visible;
            top: -1px;
            right: -10px;
            border: 10px solid transparent;
            border-top: 10px solid #ccc;
        }

        .right::after {
            content: '';
            position: absolute;
            visibility: visible;
            top: 0px;
            right: -8px;
            border: 10px solid transparent;
            border-top: 10px solid rgb(252, 255, 250);
            clear: both;
        }

        .scrollable {
            height: 50vh;
            scroll-behavior: smooth;
            overflow-y: scroll;
            margin-right: auto;
            margin-left: auto;
            width: 95%;


        }

        .scrollable h1 {
            font-size: 20px;
        }

        .scrollable h2 {
            font-size: 25px;
        }

        .scrollable h3 {
            font-size: 20px;
        }

        .btnsuggest {
            margin-bottom: 10px;
            width: 210px;
            background-color: rgb(255, 255, 255);
        }
    </style>
</head>

<body>

    <div class="bg-dark bg-gradient" style="padding-top:10px ;padding-bottom:5px ; color:wheat">

        <div>
            <div style=" position: absolute;float: left ; text-align: left; margin-left: 10px; "><img src="/logo.png"
                    class="" alt="prof img" style="width: 80px; border-radius: 30%; " />
            </div>

            <div style=" text-align: center; margin-left:auto ; margin-right: auto;"><img src='/public/AssistantImages/Supaquick.jpeg'
                    class="" alt="prof img" style="width: 80px; border-radius: 50%;" /></div>

        </div>
        <div style="margin-left: auto; margin-right: auto; text-align: center;">
            <h2>
                <%= AssistantName %>
            </h2>
        </div>
        </span>

    </div>

    <div class="scrollable" style="margin-left: auto; margin-right: auto;margin-bottom: 5px; ">
        <div id="messages" name="messages" style="width: 95%; ">
            <hr>

            <% if(testarr.length <=0 || ArrId.length <=0){ %>
                <div
                    style="text-align: center; align-items: center; align-content: center; margin-top: 100px; margin-left: auto; margin-right: auto;">
                    <h3>Your Messages Will Display Here</h3>
                </div>


                <div
                    style="text-align: center; align-items: center; align-content: center; margin-top: 30px; margin-left: auto; margin-right: auto;">
                    <button id="1" name="1" onclick="btnclick(`Yolandi, create a workout plan for weight loss.`)"
                        class="btn btn-outline-dark btnsuggest">Yolandi, create a workout plan for weight loss.
                    </button>
                    <button id="2" name="2" onclick="btnclick('What are some high-protein meal ideas?')"
                        class="btn btn-outline-dark btnsuggest">What are some high-protein meal ideas?
                    </button>
                    <button id="3" name="3" onclick="btnclick('Can you guide me through today’s workout?')"
                        class="btn btn-outline-dark btnsuggest">Can you guide me through today’s workout?
                    </button>
                    <button id="4" name="4" onclick="btnclick('What are some high-protein meal ideas?')"
                        class="btn btn-outline-dark btnsuggest">What are some high-protein meal ideas?
                    </button>
                    <button id="5" name="5" onclick="btnclick('Any fitness tips for beginners?')"
                        class="btn btn-outline-dark btnsuggest">Any fitness tips for beginners?
                    </button>

                </div>


        </div>

        <script>
            function btnclick(inp) {
                document.getElementById("testvalue").textContent = inp;
                document.getElementById("testvalue").focus();
            } </script>
        </form>



        <%}%>
            <% if(testarr.length> 0){ for (let index=0; index < testarr.length; index++) {%>
                    <div id='<%= index  %>'>
                        <% if(ArrId[index] !='null' ){ %>
                            <p id='<%= index %>'>
                            <div class="profa" style="top: 0;">
                                <div class="image"
                                    style="margin-right: 20px;top: 0; align-content: start; align-self: flex-start;">
                                    <img src='/public/AssistantImages/Supaquick.jpeg' class="" alt="prof img"
                                        style="width: 40px; border-radius: 50%;" />
                                </div>

                                <span style=" display: inline-block;">
                                    <strong>
                                        <div class="left">
                                            <%- testarr[index]; %>
                                        </div>

                                    </strong>
                                </span>
                            </div>
                            <hr>
                            <% }else if(ArrId[index]=='null' ){ %>
                                <div class="usera" style="margin-right: 0px;">
                                    <span style="margin-right: 0px; display: inline-block;">
                                        <div class="right">

                                            <%- testarr[index]%>
                                        </div>
                                    </span>
                                    <div class="image" style="right: 0px;"><img src="/noun-user-829931.png" class=""
                                            alt="user img" style="width: 40px; border-radius: 50%;" />
                                    </div>

                                </div>
                                </p>

                                <% } %>
                    </div>
                    <script>document.getElementById('<%= index%>').scrollIntoView()</script>
                    <%}} %>
    </div>


    </div>
    <script>

        // Get the scrollable div element
        let scrollableDiv =
            document.getElementById('messages');

        // Function to scroll to the bottom of the div
        function scrollToBottom() {
            scrollableDiv.scrollTop = scrollableDiv
                .scrollHeight;
        }
    </script>



    </div>

    <div id="inputmessage"
        style=" margin-left: auto; margin-right: auto; display: grid; width: 90%; bottom: 0; position: relative;">

        <form action="/" method="post" style="display: inline-flex; ">

            <div class="input-group" style="display: inline-flex;">
                <textarea aria-label="submit" class=" form-control"
                    style="border: solid rgb(139, 35, 46) 1px;background-color: rgba(220, 53, 69,0.3);" name='testvalue'
                    id='testvalue' placeholder="What would you like to learn?" required></textarea>

                <button type="submit" enabled name="btnsubmit" id="btnsubmit" class="btn btn-danger"
                    onclick="submitForm()" style="height: 100%;"><img src="/icons8-send-detailed-outline-96.png"
                        id="imgsub" class="" alt="user img" style="width: 30px; " /></button>

                <img src="/Settings.gif" id="imgload" class="" alt="user img" style="width:50px; " hidden="true" />
            </div>
            <script>
                function submitForm() {
                    //document.getElementById("btnsubmit").disabled = true;
                    if (document.getElementById('testvalue').value.length > 0) {
                        document.getElementById("btnsubmit").hidden = true;
                        document.getElementById("imgload").hidden = false;
                    }
                    //   document.getElementById("imgsub").attributes('src') = "/prof.jpg"
                }
            </script>
        </form>
    </div><br>
    <form action="/clear" method="post" style="margin-right:auto; margin-left:auto; width: 90%;">
        <div class="input-group">
            <button type="submit" name="submit" class="btn btn-dark"
                style="margin-right:auto; margin-left:auto; width: 100%;" onclick="">Clear
                Chat</button>
        </div>
    </form>
    </div>


</body>

</html>